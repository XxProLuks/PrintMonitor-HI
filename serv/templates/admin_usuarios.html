{% extends "base.html" %}
{% block title %}Admin - Usuários{% endblock %}

{% block content %}
<div class="page-header">
  <h2><i class="bi bi-people-fill"></i> Administração de Usuários</h2>
</div>

{% if message %}
<div class="alert alert-info alert-dismissible fade show" role="alert">
  <i class="bi bi-info-circle"></i> {{ message }}
  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% endif %}

<div class="card mb-4">
  <div class="card-header bg-transparent border-0">
    <h5 class="mb-0"><i class="bi bi-list-ul"></i> Lista de Usuários e Setores</h5>
  </div>
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-modern">
        <thead>
          <tr>
            <th><i class="bi bi-person"></i> Usuário</th>
            <th><i class="bi bi-building"></i> Setor</th>
            <th><i class="bi bi-gear"></i> Ações</th>
          </tr>
        </thead>
        <tbody>
          {% for usuario, setor in usuarios %}
          <tr>
            <form method="post">
              <td>
                <input type="hidden" name="usuario" value="{{ usuario }}">
                <strong>{{ usuario }}</strong>
              </td>
              <td>
                <input type="text" name="setor" class="form-control" value="{{ setor or '' }}" placeholder="Digite o setor...">
              </td>
              <td>
                <button type="submit" name="action" value="edit" class="btn btn-success btn-sm btn-modern">
                  <i class="bi bi-check-circle"></i> Atualizar
                </button>
                <button type="submit" name="action" value="delete" class="btn btn-danger btn-sm btn-modern ms-2" 
                        onclick="return confirm('Confirma exclusão do usuário {{ usuario }}?');">
                  <i class="bi bi-trash"></i> Excluir
                </button>
              </td>
            </form>
          </tr>
          {% else %}
          <tr>
            <td colspan="3" class="text-center py-5">
              <i class="bi bi-inbox" style="font-size: 3rem; opacity: 0.3;"></i>
              <p class="text-muted mt-3">Nenhum usuário encontrado.</p>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
