{% extends "base.html" %}

{% block title %}Sugestões de Economia{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="page-header mb-4">
        <h1><i class="bi bi-lightbulb-fill"></i> Sugestões de Economia</h1>
        <p class="text-muted">Sugestões automáticas para reduzir custos de impressão</p>
    </div>

    {% if economia_total.economia_total_estimada > 0 %}
    <div class="stat-card success mb-4">
        <h5><i class="bi bi-piggy-bank"></i> Economia Total Estimada</h5>
        <div class="h2 text-success">R$ {{ "%.2f"|format(economia_total.economia_total_estimada) }}</div>
        <p class="text-muted mb-0">{{ economia_total.quantidade_sugestoes }} sugestões disponíveis</p>
    </div>
    {% endif %}

    {% if sugestoes %}
    <div class="table-responsive">
        <table class="table table-modern">
            <thead>
                <tr>
                    <th>Data</th>
                    <th>Tipo</th>
                    <th>Sugestão</th>
                    <th>Economia Estimada</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for sugestao in sugestoes %}
                <tr>
                    <td>{{ sugestao.created_at[:19] if sugestao.created_at else 'N/A' }}</td>
                    <td>
                        {% if sugestao.tipo == 'duplex' %}
                        <span class="badge bg-info badge-modern">Duplex</span>
                        {% elif sugestao.tipo == 'pb' %}
                        <span class="badge bg-secondary badge-modern">P&B</span>
                        {% else %}
                        <span class="badge bg-primary badge-modern">{{ sugestao.tipo }}</span>
                        {% endif %}
                    </td>
                    <td>{{ sugestao.mensagem }}</td>
                    <td>
                        <strong class="text-success">R$ {{ "%.2f"|format(sugestao.economia_estimada or 0) }}</strong>
                    </td>
                    <td>
                        {% if sugestao.aplicada %}
                        <span class="badge bg-success badge-modern">Aplicada</span>
                        {% else %}
                        <span class="badge bg-warning badge-modern">Pendente</span>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="alert alert-info">
        <i class="bi bi-info-circle"></i> Nenhuma sugestão de economia disponível no momento.
    </div>
    {% endif %}
</div>
{% endblock %}

